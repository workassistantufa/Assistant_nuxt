(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{263:function(e,t,n){"use strict";n.r(t);var o=n(7),r=(n(49),n(39),{middleware:function(e){e.store;var t=e.redirect,n=localStorage.getItem("UsertAuthID");if(console.log("UsertAuthID=",n),!n)return t("/auth")},data:function(){return{columns:[{label:"id",field:"id",type:"number",width:"50px",tooltip:"Порядковый номер позиции справочника"},{label:"Наименование позиции справочника",field:"Name",width:"500px",filterOptions:{enabled:!0},html:!0},{label:"Описание",field:"Description",filterOptions:{enabled:!0}}],selectedRows:[]}},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.app,o={params:{module:"dictionary",form:"Client",id:0}},t.next=4,n.$axios.$get("http://localhost:3001/api",o);case 4:return r=t.sent,console.log("formList=",r),l=r.map((function(e){return{id:e.id,Name:'<a href="/dictionary/Client/'+e.id+'">'+e.Name+"</a>",Description:e.Description}})),t.abrupt("return",{rows:l});case 8:case"end":return t.stop()}}),t)})))()},methods:{selectionChanged:function(e){this.$data.selectedRows=e.selectedRows},createRow:function(){this.$axios.$post("http://localhost:3001/api",{module:"dictionary",form:"Client"}),this.$nuxt.refresh()},deleteRow:function(){var e={data:{module:"dictionary",form:"Client",columnList:this.$data.selectedRows}};this.$axios.$delete("http://localhost:3001/api",e),this.$nuxt.refresh()}}}),l=n(38),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("h1",[e._v("Справочник Клиентов")]),e._v(" "),e._m(0),e._v(" "),n("nuxt-link",{attrs:{to:"/dictionary"}},[n("button",[e._v("Выход")])]),e._v(" "),n("button",{on:{click:e.createRow}},[e._v(" (+) Создать")]),e._v(" "),e._m(1),e._v(" "),n("div",[n("vue-good-table",{attrs:{columns:e.columns,rows:e.rows,"fixed-header":!0,"select-options":{enabled:!0,selectOnCheckboxOnly:!0},compactMode:""},on:{"on-selected-rows-change":e.selectionChanged}},[n("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[n("button",{on:{click:e.deleteRow}},[e._v(" (-) Удалить")])])])],1)],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[e._v("----------")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[e._v("----------")])])}],!1,null,null,null);t.default=component.exports}}]);