(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{264:function(t,e,o){"use strict";o.r(e);var n=o(7),r=(o(49),o(39),{middleware:function(t){t.store;var e=t.redirect,o=localStorage.getItem("UsertAuthID");if(console.log("UsertAuthID=",o),!o)return e("/auth")},data:function(){return{columns:[{label:"id",field:"id",type:"number",width:"50px",tooltip:"Порядковый номер позиции справочника"},{label:"Наименование позиции справочника",field:"Name",width:"500px",filterOptions:{enabled:!0},html:!0},{label:"Описание",field:"Description",filterOptions:{enabled:!0}}],selectedRows:[]}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.app,n={params:{module:"dictionary",form:"Contractor",id:0}},e.next=4,o.$axios.$get("http://localhost:3001/api",n);case 4:return r=e.sent,console.log("formList=",r),c=r.map((function(t){return{id:t.id,Name:'<a href="/dictionary/Contractor/'+t.id+'">'+t.Name+"</a>",Description:t.Description}})),e.abrupt("return",{rows:c});case 8:case"end":return e.stop()}}),e)})))()},methods:{selectionChanged:function(t){this.$data.selectedRows=t.selectedRows},createRow:function(){this.$axios.$post("http://localhost:3001/api",{module:"dictionary",form:"Contractor"}),this.$nuxt.refresh()},deleteRow:function(){var t={data:{module:"dictionary",form:"Contractor",columnList:this.$data.selectedRows}};this.$axios.$delete("http://localhost:3001/api",t),this.$nuxt.refresh()}}}),c=o(38),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",[o("h1",[t._v("Справочник Контрагентов")]),t._v(" "),t._m(0),t._v(" "),o("nuxt-link",{attrs:{to:"/dictionary"}},[o("button",[t._v("Выход")])]),t._v(" "),o("button",{on:{click:t.createRow}},[t._v(" (+) Создать")]),t._v(" "),t._m(1),t._v(" "),o("div",[o("vue-good-table",{attrs:{columns:t.columns,rows:t.rows,"fixed-header":!0,"select-options":{enabled:!0,selectOnCheckboxOnly:!0},compactMode:""},on:{"on-selected-rows-change":t.selectionChanged}},[o("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[o("button",{on:{click:t.deleteRow}},[t._v(" (-) Удалить")])])])],1)],1)}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("label",[t._v("----------")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("label",[t._v("----------")])])}],!1,null,null,null);e.default=component.exports}}]);